<!doctype html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/svg+xml" href="/images/small_logo.svg" />
  <title>GPM</title>
  <script type="module" src="/main.js"></script>
</head>

<body>
  <div id="wait-to-load" style="display:none;">
    <div id="gene" x-data="gene" x-init="loadData">
      <navigation-bar></navigation-bar>

      <div class="columns mt-4 mb-0">
        <div class="column">
          <h3 class="title is-2 has-text-centered mb-0" x-text="'Gene: '+getGeneName()"></h3>
          <h6 class="has-text-centered mb-0 mt-0">
            Range: <span x-text="getGenomicRange"></span>
          </h6>
          <h6 class="has-text-centered mb-0">
            <a class="button is-link is-small is-centered is-light" x-bind:href="'https://www.ncbi.nlm.nih.gov/gene/?term='+getGeneName()" target="_blank">
              <span>NCBI Gene</span>
            </a>
          </h6>
        </div>
      </div>

      <div class="columns mt-2">
        <div class="column is-10">
          <div x-model="initTissueByTraitGraph" id="gene-dot-plot"></div>
          <div x-model="initNetworkGraph" id="gene-network-plot"></div>
        </div>

        <div class="column is-2">
          <graph-options></graph-options>
        </div>
      </div>
        <div class="columns mt-0 is-centered">
          <div class="column is-11">
            <table class="table is-bordered is-striped is-narrow is-hoverable is-fullwidth">
              <thead>
                <tr>
                  <th><abbr title="Coloc Info">Coloc Info</abbr></th>
                  <th><abbr title="Trait">Trait</abbr></th>
                  <th><abbr title="Data Type">Data Type</abbr></th>
                  <th><abbr title="Gene">Gene</abbr></th>
                  <th><abbr title="Tissue">Tissue</abbr></th>
                  <th><abbr title="Cis/Trans">Cis/Trans</abbr></th>
                  <th><abbr title="P-value">P-value</abbr></th>
                </tr>
              </thead>
              <tbody class="is-size-7">
                <template x-for="[candidate_snp, colocs] in Object.entries(getDataForTable)">
                    <template x-for="(coloc, colocIndex) in colocs">
                        <tr x-bind:style="'background-color: ' + coloc.color">
                            <template x-if="colocIndex === 0">
                                <td x-bind:rowspan="colocs.length" style="width: 20%">
                                    Causal Variant: <a :href="'snp.html?id=' + coloc.candidate_snp" x-text="coloc.candidate_snp"></a>
                                    <br>
                                    LD Region: <a :href="'region.html?id=' + coloc.ld_block" x-text="coloc.ld_block"></a>
                                    <br>
                                    Posterior Probability (PP): <b x-text="coloc.posterior_prob"></b>
                                    <br>
                                    PP Explained by SNP: <b x-text="coloc.posterior_explained_by_snp"></b>
                                </td>
                            </template>
                            <td x-text="coloc.trait" style="width:40%"></td>
                            <td x-text="coloc.data_type"></td>
                            <td><a :href="'gene.html?id=' + coloc.known_gene" x-text="coloc.known_gene"></a></td>
                            <td x-text="coloc.tissue"></td>
                            <td x-text="coloc.cis_trans"></td>
                            <td x-text="(coloc.min_p !== null ? coloc.min_p.toExponential(2) : '')"></td>
                        </tr>
                    </template>
                </template>
              </tbody>
            </table>
          </div>

      <!-- <div class="columns mt-2 is-centered">
        <div class="column is-11">
          <table class="table is-bordered is-striped is-narrow is-hoverable is-fullwidth is-size-7">
            <thead>
              <tr>
                <th class="has-text-centered py-2"><abbr title="Tissue">Tissue</abbr></th>
                <th class="has-text-centered py-2"><abbr title="Trait">Trait</abbr></th>
                <th class="has-text-centered py-2"><abbr title="P-value">P-value</abbr></th>
                <th class="has-text-centered py-2"><abbr title="SNP">SNP</abbr></th>
              </tr>
            </thead>
            <tbody>
              <template x-for="item in getDataForTable">
                <tr>
                  <td class="py-1 px-2" x-text="item.tissue_a"></td>
                  <td class="py-1 px-2" x-text="item.trait_b"></td>
                  <td class="py-1 px-2" x-text="item.min_p"></td>
                  <td class="py-1 px-2">
                  <a :href="'snp.html?' + item.candidate_snp" x-text="item.candidate_snp"></a>
                  </td>
                </tr>
              </template>
            </tbody>
          </table>
        </div>
      </div> -->
    </div>
  </div>
</body>

</html> 